{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Jugru\\\\Desktop\\\\projStuff\\\\wta\\\\client\\\\src\\\\Containers\\\\Recommendations.js\";\nimport React, { useEffect, useState } from 'react';\nimport { favouritebooks } from \"../Api-requests/bookRequests\";\nimport TableBox from \"../Components/TableBox\";\nimport getUser from '../actions/getUser';\nimport InnerNavbar from '../Components/InnerNavbar';\nimport { bookByName, bookByAuthor, bookBySubject } from \"../Api-requests/bookRequests\";\n\nconst Recommendations = () => {\n  const [CartBooks, setBooks] = useState([]);\n  const [Recommended, setRecommended] = useState([]);\n  let Pseudo = [];\n\n  const getRecommendtions = async () => {\n    const username = getUser();\n    await favouritebooks(username).then(res => {\n      if (res.status === 200 && res.data) {\n        setBooks(() => {\n          return [...res.data];\n        });\n        res.data.map(book => {\n          bookByAuthor(book.author).then(res => {\n            if (res.status === 200) {\n              //console.log(res.data)\n              setRecommended(prev => {\n                return [...prev, ...res.data];\n              });\n            }\n          });\n          bookByName(book.bookname).then(res => {\n            if (res.status === 200) {\n              setRecommended(prev => {\n                return [...prev, ...res.data];\n              });\n            }\n          });\n          bookBySubject(book.subject).then(res => {\n            if (res.status === 200) {\n              //console.log(res.data)\n              setRecommended(prev => {\n                return [...prev, ...res.data];\n              });\n            }\n          });\n        });\n      }\n    });\n  };\n\n  useEffect(() => {\n    getRecommendtions().then(() => {\n      console.log(Recommended);\n      Pseudo = Recommended;\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(InnerNavbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }), CartBooks.length === 0 ? /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }, \"Add books to cart to get recommendations\") : /*#__PURE__*/React.createElement(TableBox, {\n    Books: Pseudo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }\n  }));\n};\n\nexport default Recommendations;","map":{"version":3,"sources":["C:/Users/Jugru/Desktop/projStuff/wta/client/src/Containers/Recommendations.js"],"names":["React","useEffect","useState","favouritebooks","TableBox","getUser","InnerNavbar","bookByName","bookByAuthor","bookBySubject","Recommendations","CartBooks","setBooks","Recommended","setRecommended","Pseudo","getRecommendtions","username","then","res","status","data","map","book","author","prev","bookname","subject","console","log","length"],"mappings":";AAAA,OAAOA,KAAP,IAAcC,SAAd,EAAwBC,QAAxB,QAAuC,OAAvC;AACA,SAAQC,cAAR,QAA6B,8BAA7B;AACA,OAAOC,QAAP,MAAqB,wBAArB;AACA,OAAOC,OAAP,MAAoB,oBAApB;AACA,OAAOC,WAAP,MAAwB,2BAAxB;AACA,SAAQC,UAAR,EAAmBC,YAAnB,EAAgCC,aAAhC,QAAoD,8BAApD;;AAEA,MAAMC,eAAe,GAAG,MAAI;AACxB,QAAM,CAACC,SAAD,EAAWC,QAAX,IAAuBV,QAAQ,CAAC,EAAD,CAArC;AACA,QAAM,CAACW,WAAD,EAAaC,cAAb,IAA+BZ,QAAQ,CAAC,EAAD,CAA7C;AACA,MAAIa,MAAM,GAAG,EAAb;;AAEA,QAAMC,iBAAiB,GAAG,YAAU;AAChC,UAAMC,QAAQ,GAAIZ,OAAO,EAAzB;AACA,UAAMF,cAAc,CAACc,QAAD,CAAd,CAAyBC,IAAzB,CAA+BC,GAAD,IAAO;AACvC,UAAGA,GAAG,CAACC,MAAJ,KAAa,GAAb,IAAoBD,GAAG,CAACE,IAA3B,EACA;AAEMT,QAAAA,QAAQ,CAAC,MAAI;AACX,iBAAO,CAAC,GAAGO,GAAG,CAACE,IAAR,CAAP;AACC,SAFK,CAAR;AAGGF,QAAAA,GAAG,CAACE,IAAL,CAAWC,GAAX,CAAgBC,IAAD,IAAQ;AACnBf,UAAAA,YAAY,CAACe,IAAI,CAACC,MAAN,CAAZ,CAA0BN,IAA1B,CAAgCC,GAAD,IAAO;AACnC,gBAAGA,GAAG,CAACC,MAAJ,KAAa,GAAhB,EACA;AAAC;AACDN,cAAAA,cAAc,CAAEW,IAAD,IAAQ;AACvB,uBAAO,CAAC,GAAGA,IAAJ,EAAU,GAAGN,GAAG,CAACE,IAAjB,CAAP;AACC,eAFa,CAAd;AAIH;AACA,WARA;AASId,UAAAA,UAAU,CAACgB,IAAI,CAACG,QAAN,CAAV,CAA0BR,IAA1B,CAAgCC,GAAD,IAAO;AACnC,gBAAGA,GAAG,CAACC,MAAJ,KAAa,GAAhB,EACA;AACIN,cAAAA,cAAc,CAAEW,IAAD,IAAQ;AACnB,uBAAO,CAAC,GAAGA,IAAJ,EAAU,GAAGN,GAAG,CAACE,IAAjB,CAAP;AACC,eAFS,CAAd;AAGP;AAAE,WANF;AAQRZ,UAAAA,aAAa,CAACc,IAAI,CAACI,OAAN,CAAb,CAA4BT,IAA5B,CAAkCC,GAAD,IAAO;AACzC,gBAAGA,GAAG,CAACC,MAAJ,KAAa,GAAhB,EACA;AAAC;AACGN,cAAAA,cAAc,CAAEW,IAAD,IAAQ;AACnB,uBAAO,CAAC,GAAGA,IAAJ,EAAU,GAAGN,GAAG,CAACE,IAAjB,CAAP;AACC,eAFS,CAAd;AAIP;AACA,WARI;AAQF,SA1BE;AA8Bf;AAAC,KArCQ,CAAN;AAqCA,GAvCJ;;AAwCApB,EAAAA,SAAS,CAAC,MAAI;AACbe,IAAAA,iBAAiB,GAChBE,IADD,CACM,MAAI;AACNU,MAAAA,OAAO,CAACC,GAAR,CAAYhB,WAAZ;AACDE,MAAAA,MAAM,GAAGF,WAAT;AACF,KAJD;AAMI,GAPI,EAOH,EAPG,CAAT;AASI,sBAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACR,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADQ,EAEPF,SAAS,CAACmB,MAAV,KAAmB,CAAnB,gBACG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gDADH,gBAEG,oBAAC,QAAD;AAAU,IAAA,KAAK,EAAEf,MAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJI,CAAR;AAUP,CAhED;;AAiEA,eAAeL,eAAf","sourcesContent":["import React,{useEffect,useState} from 'react'\r\nimport {favouritebooks} from \"../Api-requests/bookRequests\"\r\nimport TableBox from \"../Components/TableBox\"\r\nimport getUser from '../actions/getUser'\r\nimport InnerNavbar from '../Components/InnerNavbar'\r\nimport {bookByName,bookByAuthor,bookBySubject} from \"../Api-requests/bookRequests\"\r\n\r\nconst Recommendations = ()=>{\r\n    const [CartBooks,setBooks] = useState([]);\r\n    const [Recommended,setRecommended] = useState([]);\r\n    let Pseudo = []\r\n\r\n    const getRecommendtions = async ()=>{\r\n        const username =  getUser();\r\n        await favouritebooks(username).then((res)=>{\r\n            if(res.status===200 && res.data)\r\n            {     \r\n    \r\n                  setBooks(()=>{\r\n                    return [...res.data]\r\n                    });\r\n                    (res.data).map((book)=>{\r\n                        bookByAuthor(book.author).then((res)=>{\r\n                           if(res.status===200)\r\n                           {//console.log(res.data)\r\n                           setRecommended((prev)=>{\r\n                           return [...prev, ...res.data]\r\n                           })\r\n                           \r\n                       }\r\n                       })\r\n                            bookByName(book.bookname).then((res)=>{\r\n                               if(res.status===200)\r\n                               {\r\n                                   setRecommended((prev)=>{\r\n                                       return [...prev, ...res.data]\r\n                                       } )\r\n                           } })\r\n            \r\n                    bookBySubject(book.subject).then((res)=>{\r\n                   if(res.status===200)\r\n                   {//console.log(res.data)\r\n                       setRecommended((prev)=>{\r\n                           return [...prev, ...res.data]\r\n                           } )\r\n                           \r\n               }\r\n               })})\r\n                   \r\n               \r\n           \r\n    }})};\r\n    useEffect(()=>{\r\n     getRecommendtions()\r\n     .then(()=>{\r\n         console.log(Recommended)\r\n        Pseudo = Recommended;\r\n     })\r\n     \r\n        },[]);\r\n\r\n        return (<div>\r\n        <InnerNavbar/>\r\n        {CartBooks.length===0?\r\n            <h3>Add books to cart to get recommendations</h3>:\r\n            <TableBox Books={Pseudo} />\r\n            }\r\n        </div>\r\n        )\r\n\r\n    \r\n}\r\nexport default Recommendations;"]},"metadata":{},"sourceType":"module"}