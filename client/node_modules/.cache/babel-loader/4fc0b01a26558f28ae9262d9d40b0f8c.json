{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Jugru\\\\Desktop\\\\projStuff\\\\wta\\\\client\\\\src\\\\Containers\\\\Search.js\";\nimport React, { useState, useEffect } from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport SearchIcon from '@material-ui/icons/Search';\nimport InnerNavbar from '../Components/InnerNavbar';\nimport { bookByName, bookByAuthor, bookBySubject } from \"../Api-requests/bookRequests\";\nimport TableBox from \"../Components/TableBox\";\nimport getUser from '../actions/getUser';\nimport Book from '../Components/Book';\n\nconst Search = () => {\n  const style = {\n    width: \"400px\"\n  };\n  const [books, setBooks] = useState([]);\n  const [user, setUser] = useState('');\n  useEffect(() => {\n    const username = getUser();\n    setUser(username);\n    console.log(username);\n  });\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n    const type = event.target.type.value;\n    const searchString = event.target.searchbar.value;\n    console.log(type);\n    if (type === 0) alert(\"Select a search type!\");else if (searchString.length == 0) alert(\"Search string can't be empty\");else {\n      console.log(\"inside main else\");\n      console.log(type);\n\n      if (type == 1) {\n        console.log(\"inside 1.\");\n        await bookByName(searchString).then(res => {\n          if (res.status === 200) {\n            console.log(res.data);\n            setBooks([...res.data]); // setBooks(()=>{\n            // return [...res.data]\n            // })\n          }\n        });\n      } else if (type == 2) {\n        console.log(\"inside 2.\");\n        await bookByAuthor(searchString).then(res => {\n          if (res.status === 200) {\n            //console.log(res.data)\n            setBooks(() => {\n              return [...res.data];\n            });\n          }\n        });\n      } else if (type == 3) {\n        console.log(\"inside 3.\");\n        await bookBySubject(searchString).then(res => {\n          if (res.status === 200) {\n            //console.log(res.data)\n            setBooks(() => {\n              return [...res.data];\n            });\n          }\n        });\n      }\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(InnerNavbar, {\n    username: user,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"searchdiv\",\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"custom-select\",\n    style: style,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    name: \"type\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 5\n    }\n  }, \"Search by\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }\n  }, \"Title\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 5\n    }\n  }, \"Author\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 5\n    }\n  }, \"Subject\")), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"searchbar\",\n    type: \"text\",\n    placeholder: \"Search..\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(IconButton, {\n    type: \"submit\",\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(SearchIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  })))), /*#__PURE__*/React.createElement(TableBox, {\n    Books: books,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 4\n    }\n  }));\n};\n\nexport default Search;","map":{"version":3,"sources":["C:/Users/Jugru/Desktop/projStuff/wta/client/src/Containers/Search.js"],"names":["React","useState","useEffect","IconButton","SearchIcon","InnerNavbar","bookByName","bookByAuthor","bookBySubject","TableBox","getUser","Book","Search","style","width","books","setBooks","user","setUser","username","console","log","handleSubmit","event","preventDefault","type","target","value","searchString","searchbar","alert","length","then","res","status","data"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport SearchIcon from '@material-ui/icons/Search'\r\nimport InnerNavbar from '../Components/InnerNavbar'\r\nimport {bookByName,bookByAuthor,bookBySubject} from \"../Api-requests/bookRequests\"\r\nimport TableBox from \"../Components/TableBox\"\r\nimport getUser from '../actions/getUser'\r\nimport Book from '../Components/Book'\r\nconst Search = ()=>{\r\n    const style={\r\n        width:\"400px\"\r\n    }\r\n    const [books,setBooks] = useState([]);\r\n   const [user,setUser] = useState('')\r\n    useEffect(()=>{\r\n        \r\n            const username  = getUser();\r\n            setUser(username);\r\n            console.log(username)\r\n        \r\n         \r\n    })\r\n    const handleSubmit =async (event)=>{\r\n        event.preventDefault();\r\n\r\n        const type =event.target.type.value;\r\n        const searchString = event.target.searchbar.value;\r\n        console.log(type);\r\n        if(type === 0)\r\n        alert(\"Select a search type!\")\r\n        else if(searchString.length==0)\r\n        alert(\"Search string can't be empty\")\r\n        else\r\n        { console.log(\"inside main else\")\r\n        console.log(type)\r\n            if(type == 1)\r\n            {console.log(\"inside 1.\")\r\n                await bookByName(searchString).then((res)=>{\r\n                    if(res.status===200)\r\n                    {console.log(res.data)\r\n                        setBooks([...res.data])\r\n                    // setBooks(()=>{\r\n                    // return [...res.data]\r\n                    // })\r\n                }\r\n                })\r\n                        \r\n            }\r\n            else if (type==2){\r\n                console.log(\"inside 2.\")\r\n                await bookByAuthor(searchString).then((res)=>{\r\n                    if(res.status===200)\r\n                    {//console.log(res.data)\r\n                    setBooks(()=>{\r\n                    return [...res.data]\r\n                    })}\r\n                })\r\n            }\r\n            else if(type == 3){\r\n                console.log(\"inside 3.\")\r\n                await bookBySubject(searchString).then((res)=>{\r\n                    if(res.status===200)\r\n                    {//console.log(res.data)\r\n                    setBooks(()=>{\r\n                    return [...res.data]\r\n                    })}\r\n                })\r\n            }\r\n        }\r\n    }\r\n    \r\n    return(<div>\r\n    <InnerNavbar  username={user}/>\r\n    <form className=\"searchdiv\" onSubmit={handleSubmit}>\r\n    <div className=\"custom-select\" style={style}>\r\n  <select name=\"type\">\r\n    <option value=\"0\">Search by</option>\r\n    <option value=\"1\">Title</option>\r\n    <option value=\"2\">Author</option>\r\n    <option value=\"3\">Subject</option>\r\n  </select>\r\n  \r\n    <input id=\"searchbar\" \r\n     type=\"text\" placeholder=\"Search..\"></input>\r\n    <IconButton\r\n     type=\"submit\"\r\n      color=\"primary\">\r\n        <SearchIcon />\r\n      </IconButton>\r\n      </div>\r\n    </form>\r\n   <TableBox Books={books} />\r\n    </div>)\r\n}\r\nexport default Search;"]},"metadata":{},"sourceType":"module"}